<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="images/bulb.png">
    <title>IdeaRescue - Collection</title>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    <style>
        /* Add your CSS styles here */
        .nav {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            padding: 20px 0;
        }

        .wrapper {
            padding-top: 150px;
        }

        #postsContainer {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            grid-gap: 20px;
        }

        .post {
            border: 1px solid #ccc;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 10px;
            transition: box-shadow 0.3s ease, transform 0.3s ease;
            /* Added transition for transform */
            background-color: #fffffe;
        }

        .post:hover {
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
            transform: scale(1.05);
            /* Zoom effect on hover */
        }

        .interaction-section {
            margin-top: 20px;
        }

        .like-btn,
        .comment-btn {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 8px 15px;
            cursor: pointer;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }

        .like-btn:hover,
        .comment-btn:hover {
            background-color: #2980b9;
        }

        .comments-container {
            margin-top: 10px;
            border-top: 1px solid #ccc;
            padding-top: 10px;
        }

        .comment-input {
            width: calc(100% - 90px);
            margin-bottom: 5px;
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .comment-btn {
            background-color: #2ecc71;
            color: white;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }

        .comment-btn:hover {
            background-color: #27ae60;
        }

        .post h3 {
            margin-top: 0;
            font-size: 1.5rem;
            color: #000000;
        }

        .post p {
            margin-bottom: 10px;
            color: #666;
        }

        .category-item {
            cursor: pointer;
            margin-bottom: 10px;
            color: #fff;
            padding: 8px;
            border-radius: 5px;
            background-color: #3498db;
            transition: background-color 0.3s ease;
        }

        .category-item:hover {
            background-color: #2980b9;
        }

        .category-item.active {
            background-color: #2ecc71;
        }
    </style>
</head>

<body>
    <div class="wrapper">
        <nav class="nav">
            <div class="nav-logo">
                <p>IdeaRescue</p>
            </div>
            <div class="nav-menu" id="navMenu">
                <ul>
                    <li><a href="home.html" class="link">Home</a></li>
                    <li><a href="dropbox.html" class="link">Drop Box</a></li>
                    <li><a href="collection.html" class="link">Collection</a></li>
                    <li><a href="about.html" class="link">About Us</a></li>
                </ul>
            </div>
            <div class="nav-menu-btn">
                <i class="bx bx-menu" onclick="myMenuFunction()"></i>
            </div>
        </nav>


        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-3" id="categoryPanel">
                    <!-- Category panel will be added here -->
                </div>
                <div class="col-lg-9" id="postsContainer">
                    <!-- Posts will be dynamically added here -->
                </div>
            </div>
        </div>

    </div>

    <footer class="footer-distributed">
        <div class="footer-left">
            <h3> IdeaRescue</h3>

            <p class="footer-links">
                <a href="home.html">Home</a>
                |
                <a href="dropbox.html">dropbox</a>
                |
                <a href="collection.html">Collection</a>
                |
                <a href="about.html">About us</a>
            </p>

            <p class="footer-company-name">
                Copyright 2024 <span>&copy;</span> <strong>IDEASRESCUE</strong>
                All rights reserved
            </p>
        </div>

        <div class="footer-center">
            <div>
                <i class='bx bxs-map'></i>
                <p><span>Delhi</span></p>
            </div>
            <div>
                <i class='bx bxs-phone'></i>
                <p>+91 7054142899</p>
            </div>
            <div>
                <i class='bx bxs-envelope'></i>
                <p><a href="#">idearescueIT@gmail.com</a></p>
            </div>
        </div>

        <div class="footer-right">
            <p class="footer-company-about">
                <span>About the company</span>
                <strong>Motive:</strong> "IdeaRescue is envisioned as a catalyst for innovation, aiming to democratize
                the process
                of idea generation and collaboration.IdeaRescue seeks to empower individuals from diverse backgrounds to
                share, explore,
                and refine their creative concepts. The project's core motive is to foster a vibrant community
                where ideas flow freely, sparking inspiration, collaboration, and ultimately driving positive change
                across various domains."
            </p>
            <div class="footer-icons">
                <a href="#"><i class='bx bxl-facebook'></i></a>
                <a href="#"><i class='bx bxl-instagram'></i></a>
                <a href="#"><i class='bx bxl-linkedin'></i></a>
                <a href="#"><i class='bx bxl-twitter'></i></a>
            </div>
        </div>
    </footer>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.10.0/firebase-app.js";
        import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.10.0/firebase-database.js";

        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "idea-collection.firebaseapp.com",
            databaseURL: "https://idea-collection-default-rtdb.firebaseio.com",
            projectId: "idea-collection",
            storageBucket: "idea-collection.appspot.com",
            messagingSenderId: "233694210710",
            appId: "1:233694210710:web:d3c9b159a96569fbdb30b7"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase();

        function createPostElement(postData) {
            const postElement = document.createElement('div');
            postElement.classList.add('post');

            postElement.innerHTML = `
            <h3>${postData.firstname} ${postData.lastname}</h3>
            <p>Category: ${postData.category}</p>
            <p>${postData.message}</p>
            <div class="interaction-section">
                <button class="like-btn">Like</button>
                <span class="likes-count">0 Likes</span>
                <div class="comment-section">
                    <textarea class="comment-input" placeholder="Write a comment..."></textarea>
                    <button class="comment-btn">Comment</button>
                    <div class="comments-container"></div>
                </div>
            </div>
        `;

            // Like button functionality
            const likeBtn = postElement.querySelector('.like-btn');
            const likesCount = postElement.querySelector('.likes-count');
            let likes = 0;

            likeBtn.addEventListener('click', () => {
                likes++;
                likesCount.textContent = `${likes} Likes`;
            });

            // Comment functionality
            const commentInput = postElement.querySelector('.comment-input');
            const commentBtn = postElement.querySelector('.comment-btn');
            const commentsContainer = postElement.querySelector('.comments-container');

            commentBtn.addEventListener('click', () => {
                const commentText = commentInput.value.trim();
                if (commentText !== '') {
                    const comment = document.createElement('div');
                    comment.textContent = commentText;
                    commentsContainer.appendChild(comment);
                    commentInput.value = ''; // Clear input after comment is added
                }
            });

            return postElement;
        }
        function fetchCategories() {
            const dbRef = ref(db, "users");
            const categories = new Set();

            onValue(dbRef, (snapshot) => {
                snapshot.forEach(childSnapshot => {
                    const postData = childSnapshot.val();
                    categories.add(postData.category);
                });
                // Add "All" category at the beginning
                categories.add("All");
                renderCategoryPanel(Array.from(categories));
                filterPostsByCategory("All"); // Filter posts by "All" category by default
                // Highlight the "All" category
                highlightCategory(document.querySelector('.category-item'));
            });
        }

        function renderPosts(postsData) {
            const postsContainer = document.getElementById('postsContainer');
            postsContainer.innerHTML = '';

            postsData.forEach(postData => {
                const postElement = createPostElement(postData);
                postsContainer.appendChild(postElement);
            });
        }

        function renderCategoryPanel(categories) {
            const categoryPanel = document.getElementById('categoryPanel');
            categoryPanel.innerHTML = '';

            // Add heading for categories
            const categoriesHeading = document.createElement('h3');
            categoriesHeading.textContent = 'Categories';
            categoriesHeading.style.color = '#fff'; // Change color to white
            categoryPanel.appendChild(categoriesHeading);


            // Create and append "All" category item at the beginning
            const allCategoryItem = document.createElement('div');
            allCategoryItem.classList.add('category-item');
            allCategoryItem.textContent = "All";
            allCategoryItem.addEventListener('click', () => {
                filterPostsByCategory("All");
                highlightCategory(allCategoryItem);
            });
            categoryPanel.appendChild(allCategoryItem);

            // Iterate over other categories and append them
            categories.forEach(category => {
                if (category !== "All") { // Skip adding "All" category again
                    const categoryItem = document.createElement('div');
                    categoryItem.classList.add('category-item');
                    categoryItem.textContent = category;
                    categoryItem.addEventListener('click', () => {
                        filterPostsByCategory(category);
                        highlightCategory(categoryItem);
                    });
                    categoryPanel.appendChild(categoryItem);
                }
            });
        }


        function filterPostsByCategory(category) {
            const dbRef = ref(db, "users");
            onValue(dbRef, (snapshot) => {
                const postsData = [];
                snapshot.forEach(childSnapshot => {
                    const postData = childSnapshot.val();
                    if (category === "All" || postData.category === category) {
                        postsData.push(postData);
                    }
                });
                renderPosts(postsData);
            });
        }




        function highlightCategory(categoryItem) {
            const categoryItems = document.querySelectorAll('.category-item');
            categoryItems.forEach(item => {
                item.classList.remove('active');
            });
            categoryItem.classList.add('active');
        }

        window.onload = fetchCategories;
    </script>
</body>

</html>

<script src="script.js"></script>